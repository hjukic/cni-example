# Monitoring stack configuration optimized for demo/education
# Uses kube-prometheus-stack for complete observability

kube-prometheus-stack:
  # Grafana configuration
  grafana:
    enabled: true
    # Admin credentials (change for production!)
    adminUser: admin
    adminPassword: admin123
    
    # Service configuration for easy access
    service:
      type: NodePort
      nodePort: 30000  # Access Grafana at http://localhost:30000
    
    # Resource limits for demo environment
    resources:
      limits:
        cpu: 500m
        memory: 512Mi
      requests:
        cpu: 250m
        memory: 256Mi
    
    # Enable useful plugins
    plugins:
      - grafana-piechart-panel
    
    # Persistence disabled for demo (enable for production)
    persistence:
      enabled: false

  # Prometheus configuration
  prometheus:
    # Service configuration for NodePort access
    service:
      type: NodePort
      nodePort: 30001  # Access Prometheus at http://localhost:30001
      
    prometheusSpec:
      # Resource limits for demo environment
      resources:
        limits:
          cpu: 1000m
          memory: 2Gi
        requests:
          cpu: 500m
          memory: 1Gi
      
      # Storage disabled for demo (enable for production)
      storageSpec: {}
      
      # Retention for demo
      retention: 7d

  # AlertManager configuration
  alertmanager:
    # Service configuration for NodePort access
    service:
      type: NodePort
      nodePort: 30002  # Access AlertManager at http://localhost:30002
      
    alertmanagerSpec:
      # Resource limits for demo
      resources:
        limits:
          cpu: 200m
          memory: 256Mi
        requests:
          cpu: 100m
          memory: 128Mi
      
      # Storage disabled for demo
      storage: {}

  # Node Exporter - disabled for Docker Desktop compatibility
  nodeExporter:
    enabled: false

  # Kube State Metrics - collect k8s cluster metrics  
  kubeStateMetrics:
    enabled: true

  # Default rules and alerts
  defaultRules:
    create: true
    rules:
      # Disable some noisy alerts for demo
      kubeApiserverAvailability: false
      kubeApiserverSlos: false